<title>portabl.ink</title><meta charset=utf-8>
<style>@import "http://portabl.ink/e.css";</style>
<body>
<h1><a href=http://portabl.ink>portabl.ink</a> â€“ create self-contained portable links</h1>
<div class=h>
 <div>
 <div class=x>
  <button id=$x>ğŸ“¨ get link</button>
  <button id=$m>â‹¯</button>
  <div id=$o>
  <button id=$r>ğŸ“„ get unformatted</button><br>
  <button id=$s>ğŸ“² get portabl.ink</button>
  </div>
 </div>
 </div>
</div>
<div id=$f></div>
<div id=$e style=min-height:100lvh></div>
<script src=https://cdn.quilljs.com/1.3.7/quill.js></script>
<script src=https://unpkg.com/quill-paste-smart@latest/dist/quill-paste-smart.js></script>
<script type=module>
let g="p,br,span,bold,b,strong,code,italic,i,em,link,a,strike,s,script,underline,u,blockquote,header,h1,h2,h3,h4,h5,h6,indent,list,ul,ol,li,code-block,pre,image,img,video".split`,`
let a,q=(a=top.Quill)&&new a($e,{formats:g,modules:{clipboard:{allowed:{tags:g,attributes:["href","target"]}}}})
if(q){
 (a=q.root).focus()
}else{
 $e.setAttribute("contenteditable","")
 $e.focus()
 a=$e
}
a.oninput=_=>onbeforeunload=_=>1
let n="innerHTML",o="onclick",j="./pack.js"
$m[o]=_=>$o.style.display="block"
$x[o]=_=>xp(a[n]+`<style>@import "http://portabl.ink/v.css"</style><a x href=http://portabl.ink>via portabl.ink</a>`,$x)
$r[o]=_=>xp(a[n],$r)
$s[o]=async()=>{
 let b,h=(b=document.body)[n]
 $e[n]=""
 let p=await(await fetch(j)).text()
 xp(b[n].replace("//p",p.slice(20)).replace(`(await import(${j})).default`,"pack"),$s)
 b[n]=h
}
let xp=async(ht,bt)=>{
 let c,u=await(await import(j)).default(ht)
 let t=bt.innerText
 if (c=navigator.clipboard) {
  await c.writeText(u)
  let bytes=new TextEncoder().encode(u).length
  let [x,z]=[...t]
  bt[n]=x+" copied ("+(bytes/1024).toFixed(2)+" KB)"
  z=="c"||setTimeout(_=>bt[n]=t,4e3)
 }else{
  bt[n]="<input readonly>"
  ;(c=bt.children[0]).value=u
  c.select()
  c.onblur=()=>bt[n]=t
 }
}//p
</script>